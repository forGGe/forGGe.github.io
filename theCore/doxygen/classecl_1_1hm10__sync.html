<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Project: ecl::hm10_sync&lt; Uart &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classecl_1_1hm10__sync.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ecl::hm10_sync&lt; Uart &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HM10 synchronous BT driver.  
 <a href="classecl_1_1hm10__sync.html#details">More...</a></p>

<p><code>#include &lt;/home/executor/projects/thecore/thecore/dev/hm10/export/dev/hm10.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a79f6de8d59f56e46e8f9ecddb3beddaa"><td class="memItemLeft" align="right" valign="top">static constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecl_1_1hm10__sync.html#a79f6de8d59f56e46e8f9ecddb3beddaa">cmd_timeout</a> ()</td></tr>
<tr class="memdesc:a79f6de8d59f56e46e8f9ecddb3beddaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines internal timeout in milliseconds during which module has to respond to commands.  <a href="#a79f6de8d59f56e46e8f9ecddb3beddaa">More...</a><br /></td></tr>
<tr class="separator:a79f6de8d59f56e46e8f9ecddb3beddaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a193689c1b12368b37185cf8e8c62d8f9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecl_1_1hm10__sync.html#a193689c1b12368b37185cf8e8c62d8f9">init</a> ()</td></tr>
<tr class="memdesc:a193689c1b12368b37185cf8e8c62d8f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes BT module.  <a href="#a193689c1b12368b37185cf8e8c62d8f9">More...</a><br /></td></tr>
<tr class="separator:a193689c1b12368b37185cf8e8c62d8f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adacbb951592b5feb6e61ba27ba3fc78a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecl_1_1hm10__sync.html#adacbb951592b5feb6e61ba27ba3fc78a">send</a> (const uint8_t *buf, size_t &amp;sz)</td></tr>
<tr class="memdesc:adacbb951592b5feb6e61ba27ba3fc78a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends data to the module.  <a href="#adacbb951592b5feb6e61ba27ba3fc78a">More...</a><br /></td></tr>
<tr class="separator:adacbb951592b5feb6e61ba27ba3fc78a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13602c8615420926d2ed9c941c7a8950"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecl_1_1hm10__sync.html#a13602c8615420926d2ed9c941c7a8950">recv</a> (uint8_t *buf, size_t &amp;sz, std::chrono::milliseconds ms=std::chrono::milliseconds::max())</td></tr>
<tr class="memdesc:a13602c8615420926d2ed9c941c7a8950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives data from the module with given timeout.  <a href="#a13602c8615420926d2ed9c941c7a8950">More...</a><br /></td></tr>
<tr class="separator:a13602c8615420926d2ed9c941c7a8950"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Uart&gt;<br />
class ecl::hm10_sync&lt; Uart &gt;</h3>

<p>HM10 synchronous BT driver. </p>
<p>This HM10 driver is simple and low-functional API to send and receive data from BT module. It lacks connection status detection and does not escape potential AT commands found in payload (yet). No flow control is used whatsoever. External protocol is required to control whether other end is ready to receive or send a data. Great advantage of this particular driver is its API. Straitforward and blocking it can be used for simple demo implementations. </p><dl class="section note"><dt>Note</dt><dd>Driver <em>is_not</em> a thread safe. Using driver routine from ISR context will lead to undefined behaviour. </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">UART</td><td>bus to work with. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a79f6de8d59f56e46e8f9ecddb3beddaa"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Uart &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr auto <a class="el" href="classecl_1_1hm10__sync.html">ecl::hm10_sync</a>&lt; Uart &gt;::cmd_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines internal timeout in milliseconds during which module has to respond to commands. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classecl_1_1hm10__sync_a79f6de8d59f56e46e8f9ecddb3beddaa_cgraph.png" border="0" usemap="#classecl_1_1hm10__sync_a79f6de8d59f56e46e8f9ecddb3beddaa_cgraph" alt=""/></div>
<map name="classecl_1_1hm10__sync_a79f6de8d59f56e46e8f9ecddb3beddaa_cgraph" id="classecl_1_1hm10__sync_a79f6de8d59f56e46e8f9ecddb3beddaa_cgraph">
<area shape="rect" id="node2" href="classecl_1_1hm10__sync.html#a193689c1b12368b37185cf8e8c62d8f9" title="Initializes BT module. " alt="" coords="206,5,345,32"/>
<area shape="rect" id="node4" href="classecl_1_1hm10__sync.html#adacbb951592b5feb6e61ba27ba3fc78a" title="Sends data to the module. " alt="" coords="200,56,351,83"/>
<area shape="rect" id="node5" href="classecl_1_1hm10__sync.html#a13602c8615420926d2ed9c941c7a8950" title="Receives data from the module with given timeout. " alt="" coords="202,107,349,133"/>
<area shape="rect" id="node3" href="namespaceecl.html#a9cad3f0245d7c13ec8d2bdece0cebcd8" title="ecl::is_error" alt="" coords="399,56,489,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a193689c1b12368b37185cf8e8c62d8f9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Uart &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a> <a class="el" href="classecl_1_1hm10__sync.html">ecl::hm10_sync</a>&lt; Uart &gt;::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes BT module. </p>
<dl class="section return"><dt>Returns</dt><dd>Status of operation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810a15e757c159904fb372bd77be464a4586">err::inval</a></td><td>Module responded with invalid data. </td></tr>
    <tr><td class="paramname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810a6bd1da51c3edc54d566604a43bdc1dbe">err::timedout</a></td><td>Module did not respond at all. </td></tr>
    <tr><td class="paramname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810a444bcb3a3fcf8389296c49467f27e1d6">err::ok</a></td><td>Module is ready to work. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classecl_1_1hm10__sync_a193689c1b12368b37185cf8e8c62d8f9_cgraph.png" border="0" usemap="#classecl_1_1hm10__sync_a193689c1b12368b37185cf8e8c62d8f9_cgraph" alt=""/></div>
<map name="classecl_1_1hm10__sync_a193689c1b12368b37185cf8e8c62d8f9_cgraph" id="classecl_1_1hm10__sync_a193689c1b12368b37185cf8e8c62d8f9_cgraph">
<area shape="rect" id="node2" href="namespaceecl.html#a9cad3f0245d7c13ec8d2bdece0cebcd8" title="ecl::is_error" alt="" coords="192,5,283,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a13602c8615420926d2ed9c941c7a8950"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Uart &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a> <a class="el" href="classecl_1_1hm10__sync.html">ecl::hm10_sync</a>&lt; Uart &gt;::recv </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>ms</em> = <code>std::chrono::milliseconds::max()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receives data from the module with given timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer to store incoming data. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">sz</td><td>Size of the buffer as input, bytes effectively written as output. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ms</td><td>Optional. Defines overall time to wait for incoming data. Defaults to infinite time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status of operation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810a6bd1da51c3edc54d566604a43bdc1dbe">err::timedout</a></td><td>Buffer was not filled completely before timeout hit. It is still possible that some data was transferred. Check </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sz</td><td>to understand how many bytes are there. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810a444bcb3a3fcf8389296c49467f27e1d6">err::ok</a></td><td>Whole buffer was populated before timeout reached. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classecl_1_1hm10__sync_a13602c8615420926d2ed9c941c7a8950_cgraph.png" border="0" usemap="#classecl_1_1hm10__sync_a13602c8615420926d2ed9c941c7a8950_cgraph" alt=""/></div>
<map name="classecl_1_1hm10__sync_a13602c8615420926d2ed9c941c7a8950_cgraph" id="classecl_1_1hm10__sync_a13602c8615420926d2ed9c941c7a8950_cgraph">
<area shape="rect" id="node2" href="namespaceecl.html#a9cad3f0245d7c13ec8d2bdece0cebcd8" title="ecl::is_error" alt="" coords="200,5,291,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adacbb951592b5feb6e61ba27ba3fc78a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Uart &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a> <a class="el" href="classecl_1_1hm10__sync.html">ecl::hm10_sync</a>&lt; Uart &gt;::send </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends data to the module. </p>
<dl class="section warning"><dt>Warning</dt><dd>It is possible that no one has connected to the device yet. </dd>
<dd>
Data that is sent to unconnected module will be lost.</dd></dl>
<p>Call blocks until all data will be sent. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Buffer to send. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">sz</td><td>Size of buffer as input, bytes written as output. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status of operation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810a444bcb3a3fcf8389296c49467f27e1d6">err::ok</a></td><td>Data sent successfully. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/executor/projects/thecore/thecore/dev/hm10/export/dev/<a class="el" href="hm10_8hpp.html">hm10.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceecl.html">ecl</a></li><li class="navelem"><a class="el" href="classecl_1_1hm10__sync.html">hm10_sync</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
