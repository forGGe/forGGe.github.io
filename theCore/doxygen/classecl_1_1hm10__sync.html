<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>theCore C++ embedded framework: ecl::hm10_sync&lt; Uart, Serial &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">theCore C++ embedded framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classecl_1_1hm10__sync.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ecl::hm10_sync&lt; Uart, Serial &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__dev.html">External device drivers</a> &raquo; <a class="el" href="group__connectivity.html">Connectivity and IoT drivers</a> &raquo; <a class="el" href="group__hm10.html">HM-10 module driver</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>HM10 synchronous BT driver.  
 <a href="classecl_1_1hm10__sync.html#details">More...</a></p>

<p><code>#include &lt;/home/travis/build/forGGe/theCore/dev/hm10/export/dev/hm10.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac777f134ba9a28117e0b5a8a0f1d8dcc"><td class="memItemLeft" align="right" valign="top">static constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecl_1_1hm10__sync.html#ac777f134ba9a28117e0b5a8a0f1d8dcc">cmd_timeout</a> ()</td></tr>
<tr class="memdesc:ac777f134ba9a28117e0b5a8a0f1d8dcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines internal timeout in milliseconds during which module has to respond to commands.  <a href="#ac777f134ba9a28117e0b5a8a0f1d8dcc">More...</a><br /></td></tr>
<tr class="separator:ac777f134ba9a28117e0b5a8a0f1d8dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dbfc7604ef8c0d9da4c0df964f4566e"><td class="memItemLeft" align="right" valign="top">static constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecl_1_1hm10__sync.html#a5dbfc7604ef8c0d9da4c0df964f4566e">retry_timeout</a> ()</td></tr>
<tr class="memdesc:a5dbfc7604ef8c0d9da4c0df964f4566e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines internal timeout in milliseconds between retries to send or receive data.  <a href="#a5dbfc7604ef8c0d9da4c0df964f4566e">More...</a><br /></td></tr>
<tr class="separator:a5dbfc7604ef8c0d9da4c0df964f4566e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2107389553195d979e02a5798eb0bad7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hm10.html#ga2107389553195d979e02a5798eb0bad7">init</a> ()</td></tr>
<tr class="memdesc:ga2107389553195d979e02a5798eb0bad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes BT module.  <a href="group__hm10.html#ga2107389553195d979e02a5798eb0bad7">More...</a><br /></td></tr>
<tr class="separator:ga2107389553195d979e02a5798eb0bad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8ae3d6928f6f3ffde866c5ab38a6143"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hm10.html#gae8ae3d6928f6f3ffde866c5ab38a6143">set_pin</a> (uint32_t pin)</td></tr>
<tr class="memdesc:gae8ae3d6928f6f3ffde866c5ab38a6143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets pin code for connecting to the bluetooth device.  <a href="group__hm10.html#gae8ae3d6928f6f3ffde866c5ab38a6143">More...</a><br /></td></tr>
<tr class="separator:gae8ae3d6928f6f3ffde866c5ab38a6143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa27fbd8226f910e8f76b4794897528d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hm10.html#gafa27fbd8226f910e8f76b4794897528d">get_pin</a> (uint32_t &amp;pin)</td></tr>
<tr class="memdesc:gafa27fbd8226f910e8f76b4794897528d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets pin code from the device.  <a href="group__hm10.html#gafa27fbd8226f910e8f76b4794897528d">More...</a><br /></td></tr>
<tr class="separator:gafa27fbd8226f910e8f76b4794897528d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf1e93e4e8dcfbacc2ef34f6736f1c16"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hm10.html#gaaf1e93e4e8dcfbacc2ef34f6736f1c16">set_immediate</a> (bool state=true)</td></tr>
<tr class="memdesc:gaaf1e93e4e8dcfbacc2ef34f6736f1c16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets immediate mode of operation.  <a href="group__hm10.html#gaaf1e93e4e8dcfbacc2ef34f6736f1c16">More...</a><br /></td></tr>
<tr class="separator:gaaf1e93e4e8dcfbacc2ef34f6736f1c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58b824791cb759625b7a1f787c134859"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hm10.html#ga58b824791cb759625b7a1f787c134859">get_immediate</a> (bool &amp;state)</td></tr>
<tr class="memdesc:ga58b824791cb759625b7a1f787c134859"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets immediate mode state.  <a href="group__hm10.html#ga58b824791cb759625b7a1f787c134859">More...</a><br /></td></tr>
<tr class="separator:ga58b824791cb759625b7a1f787c134859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaebb3483c8b33c90e906a4e2771aa4ca0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hm10.html#gaebb3483c8b33c90e906a4e2771aa4ca0">disconnect</a> ()</td></tr>
<tr class="memdesc:gaebb3483c8b33c90e906a4e2771aa4ca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send disconnect command.  <a href="group__hm10.html#gaebb3483c8b33c90e906a4e2771aa4ca0">More...</a><br /></td></tr>
<tr class="separator:gaebb3483c8b33c90e906a4e2771aa4ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c90323f08b3ec04432b5556f0c59593"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecl_1_1hm10__sync.html#a0c90323f08b3ec04432b5556f0c59593">start</a> ()</td></tr>
<tr class="memdesc:a0c90323f08b3ec04432b5556f0c59593"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually Starts communication.  <a href="#a0c90323f08b3ec04432b5556f0c59593">More...</a><br /></td></tr>
<tr class="separator:a0c90323f08b3ec04432b5556f0c59593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga544f1482c9c09a0023cd31ac819edafd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hm10.html#ga544f1482c9c09a0023cd31ac819edafd">data_send</a> (const uint8_t *buf, size_t &amp;sz)</td></tr>
<tr class="memdesc:ga544f1482c9c09a0023cd31ac819edafd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends data to the module.  <a href="group__hm10.html#ga544f1482c9c09a0023cd31ac819edafd">More...</a><br /></td></tr>
<tr class="separator:ga544f1482c9c09a0023cd31ac819edafd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa97b179ca7faa53016857a054c07da1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hm10.html#gafa97b179ca7faa53016857a054c07da1">data_recv</a> (uint8_t *buf, size_t &amp;sz, std::chrono::milliseconds ms=std::chrono::milliseconds::max())</td></tr>
<tr class="memdesc:gafa97b179ca7faa53016857a054c07da1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives data from the module with given timeout.  <a href="group__hm10.html#gafa97b179ca7faa53016857a054c07da1">More...</a><br /></td></tr>
<tr class="separator:gafa97b179ca7faa53016857a054c07da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class Uart, class Serial = ecl::serial&lt;Uart&gt;&gt;<br />
class ecl::hm10_sync&lt; Uart, Serial &gt;</h3>

<p>HM10 synchronous BT driver. </p>
<p>This HM10 driver is simple and low-functional API to send and receive data from BT module. It lacks connection status detection and does not escape potential AT commands found in payload (yet). No flow control is used whatsoever. External protocol is required to control whether other end is ready to receive or send a data. Great advantage of this particular driver is its API. Straitforward and blocking it can be used for simple demo implementations. </p><dl class="section note"><dt>Note</dt><dd>Driver <em>is_not</em> a thread safe. Using driver routine from ISR context will lead to undefined behaviour. </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Uart</td><td>instance of the UART platform driver. </td></tr>
    <tr><td class="paramname">Serial</td><td>instance attached to the UART bus to work with. Provided for mock injection in unit tests. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac777f134ba9a28117e0b5a8a0f1d8dcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac777f134ba9a28117e0b5a8a0f1d8dcc">&#9670;&nbsp;</a></span>cmd_timeout()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Uart , class Serial  = ecl::serial&lt;Uart&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr auto <a class="el" href="classecl_1_1hm10__sync.html">ecl::hm10_sync</a>&lt; Uart, Serial &gt;::cmd_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines internal timeout in milliseconds during which module has to respond to commands. </p>

</div>
</div>
<a id="a5dbfc7604ef8c0d9da4c0df964f4566e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dbfc7604ef8c0d9da4c0df964f4566e">&#9670;&nbsp;</a></span>retry_timeout()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Uart , class Serial  = ecl::serial&lt;Uart&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr auto <a class="el" href="classecl_1_1hm10__sync.html">ecl::hm10_sync</a>&lt; Uart, Serial &gt;::retry_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines internal timeout in milliseconds between retries to send or receive data. </p>

</div>
</div>
<a id="a0c90323f08b3ec04432b5556f0c59593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c90323f08b3ec04432b5556f0c59593">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Uart , class Serial  = ecl::serial&lt;Uart&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810">err</a> <a class="el" href="classecl_1_1hm10__sync.html">ecl::hm10_sync</a>&lt; Uart, Serial &gt;::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manually Starts communication. </p>
<dl class="section pre"><dt>Precondition</dt><dd>Module is in immediate mode and acts like a master. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__hm10.html#gaaf1e93e4e8dcfbacc2ef34f6736f1c16" title="Sets immediate mode of operation. ">set_immediate()</a></dd></dl>
<p>Sends AT+START command </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810a15e757c159904fb372bd77be464a4586" title="Interrupted function. ">err::inval</a></td><td>Module responded with invalid data. </td></tr>
    <tr><td class="paramname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810a6bd1da51c3edc54d566604a43bdc1dbe" title="Stream ioctl() timeout. ">err::timedout</a></td><td>Module did not respond at all. </td></tr>
    <tr><td class="paramname"><a class="el" href="namespaceecl.html#ae35889935b17d1382e0afc3dc87e9810a444bcb3a3fcf8389296c49467f27e1d6">err::ok</a></td><td>Module now can send and receive data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="hm10_8hpp.html">hm10.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceecl.html">ecl</a></li><li class="navelem"><a class="el" href="classecl_1_1hm10__sync.html">hm10_sync</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
