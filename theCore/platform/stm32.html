

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>STM32 &mdash; theCore  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="theCore  documentation" href="../index.html"/>
        <link rel="up" title="Supported platforms" href="index.html"/>
        <link rel="next" title="Texas Instruments Tiva C TM4C123G" href="ti-tivac-tm4c123g.html"/>
        <link rel="prev" title="Supported platforms" href="index.html"/>
 

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5WCW8RS');</script>
<!-- End Google Tag Manager -->


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../contents.html" class="icon icon-home"> theCore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">theCore: C++ Embedded Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts/index.html">theCore scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_structure.html">Project structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arch.html">Supported architectures</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Supported platforms</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">STM32</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#available-examples">Available examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#periphery-overview">Periphery overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timer-allocation">Timer allocation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#available-options">Available options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#known-limitations">Known limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#u-s-art">U(S)ART</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Available options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Known limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#adc-and-channels">ADC and channels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#available-adc-options">Available ADC options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Known limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#available-adc-channel-options">Available ADC channel options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Known limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#i2c">I2C</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">Available options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-and-spi">I2S and SPI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#available-options-for-i2s">Available options for I2S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#available-options-for-spi">Available options for SPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Known limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pin-multiplexing">Pin multiplexing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">Available options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#exti">EXTI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miscellaneous-configuration">Miscellaneous configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#console">Console</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ti-tivac-tm4c123g.html">Texas Instruments Tiva C TM4C123G</a></li>
<li class="toctree-l2"><a class="reference internal" href="particle-electron.html">Particle Electron</a></li>
<li class="toctree-l2"><a class="reference internal" href="kinetis-ke02z.html">Kinetis KE02Z</a></li>
<li class="toctree-l2"><a class="reference internal" href="host.html">Host</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devices/index.html">Device drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/index.html">Libraries and utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../os_layer.html">OS abstraction layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community and developer guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Documentation development and contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing and CI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits and acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">theCore</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Supported platforms</a> &raquo;</li>
        
      <li>STM32</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/platform/stm32.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5WCW8RS"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <div class="section" id="stm32">
<span id="thecore-stm32"></span><h1>STM32<a class="headerlink" href="#stm32" title="Permalink to this headline">¶</a></h1>
<p>The STM32 is a family of 32-bit Flash microcontrollers based on the
ARM Cortex-M processor. theCore supports two families of STM32: STM32F4 and STM32L1</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The platform is configured by theCore configurator.
To make sure you are familiar with it, check the <a class="reference internal" href="../scripts/configurator.html#thecore-configurator"><span class="std std-ref">Configurator graphical interface</span></a>
section before going any further.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Currently, only <code class="docutils literal notranslate"><span class="pre">STM32F407VG</span></code> device is supported for STM32 platform.</p>
</div>
<p>To import all generated definitions into the application code, simply add following
line to your source:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;aux/generated.hpp&gt;</span><span class="cp"></span>
</pre></div>
</div>
<p>For more JSON configuration examples for STM32 platform, refer to
the <a class="reference internal" href="../examples/index.html#thecore-examples"><span class="std std-ref">Examples</span></a> page.</p>
<p>Following sections provide in-depth description of peripheral configuration.
Arm yourself with the Reference Manual from ST before going any further.</p>
<div class="admonition hint" id="stm32-rm">
<p class="first admonition-title">Hint</p>
<p>Hereinafter <strong>RM</strong> stands for <em>Reference Manual</em> from MCU vendor.
Note that some STM32 families has more than one RM per family.
Pick appropriate, based on your concrete MCU model.
Below are links to RMs for each supported family.</p>
<ul class="last simple">
<li><a class="reference external" href="https://goo.gl/Xn1DRB">STM32F4 RM</a></li>
</ul>
</div>
<div class="section" id="available-examples">
<h2>Available examples<a class="headerlink" href="#available-examples" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../examples/blinky.html#thecore-blinky"><span class="std std-ref">Simple LED blink example</span></a></li>
<li><a class="reference internal" href="../examples/hello-world.html#thecore-hello-world"><span class="std std-ref">Simple Hello World example</span></a></li>
<li><a class="reference internal" href="../examples/stm32f4-discovery-cs43l22.html#thecore-stm32f4-cs43l22"><span class="std std-ref">STM32F4 discovery audio example with CS43L22 audio DAC</span></a></li>
<li><a class="reference internal" href="../examples/bluetooth-hm10.html#thecore-hm-10-example"><span class="std std-ref">HM-10 Bluetooth LE (4.0) wireless module example</span></a></li>
<li><a class="reference internal" href="../examples/htu21d-temperature-humidity-sensor.html#thecore-htu21d-example"><span class="std std-ref">HTU21D temperature and humidity sensor example</span></a></li>
</ul>
</div>
<div class="section" id="periphery-overview">
<h2>Periphery overview<a class="headerlink" href="#periphery-overview" title="Permalink to this headline">¶</a></h2>
<p>STM32 MCU peripheries, can be configured trough theCore configurator.</p>
<p>Note that to use any of periphery, corresponding pins must be configured too.
<strong>Do not forget to include pin multiplexing configuration for each desired periphery.</strong>
Proceed to the <a class="reference internal" href="#stm32-multiplexing">STM32 Multiplexing</a> section for more details.</p>
</div>
<div class="section" id="timer-allocation">
<h2>Timer allocation<a class="headerlink" href="#timer-allocation" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Driver sources:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/export/aux/execution.hpp</span></code></td>
</tr>
</tbody>
</table>
<p>The system timer is a periphery that can provide fixed frequency ticks for
whole application. The system timer can be configured from the
“Systimer” submenu.</p>
<div class="section" id="available-options">
<h3>Available options<a class="headerlink" href="#available-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">frequency:</th><td class="field-body"><p class="first">Timer frequency in Hz.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">source:</th><td class="field-body"><p class="first">Timer source. Only <code class="docutils literal notranslate"><span class="pre">systick</span></code> is available for now.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">owner:</th><td class="field-body"><p class="first">Timer owner. If <code class="docutils literal notranslate"><span class="pre">user</span></code> is selected, then theCore will configure the timer,
but will not use it inside its internal machinery. In such case, the user can
decide when to stop or start the system timer.</p>
<p class="last">If <cite>thecore</cite> is selected, then the systimer will be both configured and
managed by internal modules of theCore. For example, timer can be started
or stopped in delay routines inside theCore. Trying to start or stop the timer
directly by user will lead to undefined behaviour.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="known-limitations">
<h3>Known limitations<a class="headerlink" href="#known-limitations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Only SysTick can be used as a timer source.</li>
<li>No dynamic change in frequency is allowed. This is by design.</li>
</ul>
</div>
</div>
<div class="section" id="u-s-art">
<h2>U(S)ART<a class="headerlink" href="#u-s-art" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Driver source:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/export/aux/usart_bus.hpp</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">Template file:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/templates/uart_cfg.in.hpp</span></code></td>
</tr>
</tbody>
</table>
<p>The UART configuration resides in the “U(S)ART” submenu.</p>
<p>The instance of the driver, generated during the configuration step, can
be used directly by its API or indirectly, as underlying device for theCore
console.</p>
<p>Check <a class="reference internal" href="#stm32-console"><span class="std std-ref">the console configuration section</span></a> to get
information about selecting particular UART as a console output.</p>
<div class="section" id="id1">
<h3>Available options<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">channel:</th><td class="field-body">Placed under “Enabled UART channel” selector. UART periphery to use.</td>
</tr>
<tr class="field-even field"><th class="field-name">baud:</th><td class="field-body">Baud rate of UART.</td>
</tr>
<tr class="field-odd field"><th class="field-name">alias:</th><td class="field-body">Driver C++ alias that will be created. Alias can be used in the user code
to access given UART.</td>
</tr>
<tr class="field-even field"><th class="field-name">comment:</th><td class="field-body">C++ comment string that will be placed next to the driver alias in
auto-generated code.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h3>Known limitations<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Only 1150200 and 9600 bauds are supported.</li>
<li>Following configuration is hard-coded and cannot be changed (yet):<ul>
<li>Stop bits: 1</li>
<li>Data length: 8 bits</li>
<li>Parity: none</li>
</ul>
</li>
<li>STM32 theCore UART supports only IRQ mode, where interrupt is generated after
each byte transmission. DMA mode is not yet implemented.</li>
</ul>
</div>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section is under construction</p>
</div>
</div>
</div>
<div class="section" id="adc-and-channels">
<h2>ADC and channels<a class="headerlink" href="#adc-and-channels" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Driver sources:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/export/aux/adc.hpp</span></code>
<code class="docutils literal notranslate"><span class="pre">platform/stm32/family/f4xx/export/stm32f4xx_adc_wrap.hpp</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">Template file:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/templates/adc_cfg.in.hpp</span></code></td>
</tr>
</tbody>
</table>
<p>ADC configuration split onto two entities. First is configuration of the ADC
itself, second is the configuration for particular channels. In such way,
it is possible to have different set of ADC channels used with the same ADC.</p>
<p>ADC options are available from “ADC” menu. ADC channel options can be found in
“ADC channels” menu.</p>
<div class="section" id="available-adc-options">
<h3>Available ADC options<a class="headerlink" href="#available-adc-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">module:</th><td class="field-body"><p class="first">ADC module to use.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">mode:</th><td class="field-body"><p class="first">ADC mode of operation. Can be set to <code class="docutils literal notranslate"><span class="pre">IRQ</span></code> or <code class="docutils literal notranslate"><span class="pre">DMA</span></code>. In IRQ mode, each
ADC conversion will result in IRQ event generated. In DMA mode, all conversions
are held by DMA and only last event is generated.</p>
<p>IRQ is easier to use. DMA is faster, but requires deeper configuration.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">DMA module:</th><td class="field-body"><p class="first">The DMA module used for getting ADC data. Available only if mode is set to DMA.
See section 10.3.3 Channel selection of <a class="reference internal" href="#stm32-rm">STM32 RM</a> to get insights of DMA
module mapping.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">DMA stream:</th><td class="field-body"><p class="first">The DMA stream used for getting ADC data. Available only if mode is set to DMA.
See section 10.3.3 Channel selection of <a class="reference internal" href="#stm32-rm">STM32 RM</a> to get insights of DMA
stream mapping.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">DMA channel:</th><td class="field-body"><p class="first">The DMA stream used for getting ADC data. Available only if mode is set to DMA.
See section 10.3.3 Channel selection of <a class="reference internal" href="#stm32-rm">STM32 RM</a> to get insights of DMA
channel mapping.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">alias:</th><td class="field-body"><p class="first">Driver C++ alias that will be created. Alias can be used in the user code
to access given ADC.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">comment:</th><td class="field-body"><p class="first last">C++ comment string that will be placed next to the driver alias in
auto-generated code.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h3>Known limitations<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Continuous mode is not implemented. See <a class="reference external" href="https://github.com/forGGe/theCore/issues/200">#200</a>.</li>
</ul>
</div>
<div class="section" id="available-adc-channel-options">
<h3>Available ADC channel options<a class="headerlink" href="#available-adc-channel-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">channel group name:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">The ADC channel group is a named array of channels. theCore configurator
allows to add or delete a group of channels. To configure a new group, first
create an empty group.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">channels:</th><td class="field-body"><p class="first">Selection of channels, included in the group. All 16 available channels
can be grouped in user-defined way. See <a class="reference internal" href="#stm32-rm">STM32 RM</a> for a mapping between
channels and pins.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">trigger:</th><td class="field-body"><p class="first">Trigger for ADC conversion:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">software</span></code> - ADC conversion started only when software request it.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id4">
<h3>Known limitations<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Only software trigger is implemented. For other triggers, see <a class="reference external" href="https://github.com/forGGe/theCore/issues/199">#199</a>.</li>
</ul>
</div>
<div class="section" id="id5">
<h3>Usage<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section is under construction</p>
</div>
</div>
</div>
<div class="section" id="i2c">
<h2>I2C<a class="headerlink" href="#i2c" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Driver source:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/export/aux/i2c_bus.hpp</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">Template file:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/templates/i2c_cfg.in.hpp</span></code></td>
</tr>
</tbody>
</table>
<div class="section" id="id6">
<h3>Available options<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">channel:</th><td class="field-body">Placed under “Enabled I2C channel” selector. I2C periphery to use.</td>
</tr>
<tr class="field-even field"><th class="field-name">mode:</th><td class="field-body">Mode of operation. IRQ is only mode that is supported.</td>
</tr>
<tr class="field-odd field"><th class="field-name">speed:</th><td class="field-body">I2C clock speed, in Hz.</td>
</tr>
<tr class="field-even field"><th class="field-name">duty cycle:</th><td class="field-body">I2C duty cycle.</td>
</tr>
<tr class="field-odd field"><th class="field-name">ack:</th><td class="field-body">Enables or disables the I2C acknowledgement.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">ack address bits:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Specifies if 7-bit or 10-bit address is acknowledged.</td>
</tr>
<tr class="field-odd field"><th class="field-name">own address:</th><td class="field-body">Specifies the first device own address. This parameter can be a 7-bit or 10-bit address.</td>
</tr>
<tr class="field-even field"><th class="field-name">alias:</th><td class="field-body">Driver C++ alias that will be created. Alias can be used in the user code
to access given I2C.</td>
</tr>
<tr class="field-odd field"><th class="field-name">comment:</th><td class="field-body">C++ comment string that will be placed next to the driver alias in
auto-generated code.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id7">
<h3>Usage<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section is under construction</p>
</div>
</div>
</div>
<div class="section" id="i2s-and-spi">
<h2>I2S and SPI<a class="headerlink" href="#i2s-and-spi" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Driver source:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/export/aux/spi_i2s_bus.hpp</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">Template file:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/templates/spi_i2s_cfg.in.hpp</span></code></td>
</tr>
</tbody>
</table>
<p>In STM32F4 the I2S is multiplexed with SPI. Pay attention to not use
the same periphery for both SPI and I2S. The configuration is located
under “SPI and I2S” menu.</p>
<div class="section" id="available-options-for-i2s">
<h3>Available options for I2S<a class="headerlink" href="#available-options-for-i2s" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">channel:</th><td class="field-body"><p class="first">I2S periphery to use.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">standard:</th><td class="field-body"><p class="first">Specifies the standard used for the I2S communication. Refer to
<a class="reference internal" href="#stm32-rm"><span class="std std-ref">Reference Manual</span></a> to get explanation about each. Values are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">phillips</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">MSB</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">LSB</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PCMShort</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PCMLong</span></code></li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">master clock:</th><td class="field-body"><p class="first">Specifies whether the I2S MCLK output is enabled or not.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">data bits:</th><td class="field-body"><p class="first">Specifies the data format for the I2S communication.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">audio frequency:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">Specifies the frequency selected for the I2S communication, in kHz.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">clock polarity:</th><td class="field-body"><p class="first">Specifies the idle state of the I2S clock.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">DMA module:</th><td class="field-body"><p class="first">The DMA module used for transferring I2S data.
See section 10.3.3 Channel selection of <a class="reference internal" href="#stm32-rm">STM32 RM</a> to get insights of DMA
module mapping.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">DMA stream:</th><td class="field-body"><p class="first">The DMA stream used for transferring I2S data.
See section 10.3.3 Channel selection of <a class="reference internal" href="#stm32-rm">STM32 RM</a> to get insights of DMA
stream mapping.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">DMA channel:</th><td class="field-body"><p class="first">The DMA stream used for transferring I2S data.
See section 10.3.3 Channel selection of <a class="reference internal" href="#stm32-rm">STM32 RM</a> to get insights of DMA
channel mapping.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">alias:</th><td class="field-body"><p class="first">Driver C++ alias that will be created. Alias can be used in the user code
to access given I2S.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">comment:</th><td class="field-body"><p class="first last">C++ comment string that will be placed next to the driver alias in
auto-generated code.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="available-options-for-spi">
<h3>Available options for SPI<a class="headerlink" href="#available-options-for-spi" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">channel:</th><td class="field-body">The SPI channel to enable.</td>
</tr>
<tr class="field-even field"><th class="field-name">type:</th><td class="field-body">SPI type. Only <code class="docutils literal notranslate"><span class="pre">master</span></code> is supported.</td>
</tr>
<tr class="field-odd field"><th class="field-name">CPOL:</th><td class="field-body">SPI clock polarity.</td>
</tr>
<tr class="field-even field"><th class="field-name">CPHA:</th><td class="field-body">SPI clock phase.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id8">
<h3>Known limitations<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>theCore SPI driver for STM32 can work only in master mode.</li>
<li>theCore generator is not yet supports SPI, see <a class="reference external" href="https://github.com/forGGe/theCore/issues/284">#284</a>.</li>
</ul>
</div>
<div class="section" id="id9">
<h3>Usage<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section is under construction</p>
</div>
</div>
</div>
<div class="section" id="pin-multiplexing">
<span id="stm32-multiplexing"></span><h2>Pin multiplexing<a class="headerlink" href="#pin-multiplexing" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Driver sources:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">platform/stm32/export/platform/gpio_device.hpp</span></code></td>
</tr>
</tbody>
</table>
<p>Pins can be configured from the “I/O pin configuration” submenu.</p>
<div class="section" id="id10">
<h3>Available options<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">channel:</th><td class="field-body"><p class="first">Channel is an actual pin that should be configured.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">mode:</th><td class="field-body"><p class="first">Pin modes:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">output</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">input</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">af</span></code> - AF stands for Alternate Function. Selecting AF allows to use the pin
for desired periphery. List of supported peripheries is different for each
pin. See below.</li>
<li><code class="docutils literal notranslate"><span class="pre">analog</span></code> - in analog mode, pin can be used as input for ADC.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">push/pull:</th><td class="field-body"><p class="first">Possible push/pull options are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">no</span></code> - no push/pull resistor.</li>
<li><code class="docutils literal notranslate"><span class="pre">push</span> <span class="pre">down</span></code> - push to VCC resistor.</li>
<li><code class="docutils literal notranslate"><span class="pre">pull</span> <span class="pre">up</span></code> - pull to GND resistor.</li>
<li><code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">drain</span></code> - open drain configuration.</li>
<li><code class="docutils literal notranslate"><span class="pre">analog</span></code> - analog input.</li>
<li><code class="docutils literal notranslate"><span class="pre">wake</span> <span class="pre">high</span></code> and <code class="docutils literal notranslate"><span class="pre">wake</span> <span class="pre">low</span></code> - pin configuration for wakeup MCU functionality.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type:</th><td class="field-body"><ul class="first simple">
<li><code class="docutils literal notranslate"><span class="pre">push-pull</span></code> - push/pull configuration enabled.</li>
<li><code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">drain</span></code> - open drain configuration.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">speed:</th><td class="field-body"><p class="first">Pin clock in MHz.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">GPIO alias:</th><td class="field-body"><p class="first">Driver C++ alias that will be created for accessing pin trough GPIO interface.
Such alias can be used in the user code for controlling pin states.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">comment:</th><td class="field-body"><p class="first">C++ comment string that will be placed next to the driver alias in
auto-generated code.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">alternate function:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first last">The alternate function, used for this pin. Available if the pin mode is set to
<code class="docutils literal notranslate"><span class="pre">af</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="exti">
<h2>EXTI<a class="headerlink" href="#exti" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section is under construction</p>
</div>
</div>
<div class="section" id="miscellaneous-configuration">
<h2>Miscellaneous configuration<a class="headerlink" href="#miscellaneous-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="console">
<span id="stm32-console"></span><h3>Console<a class="headerlink" href="#console" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section is under construction. For now, all examples in the
<a class="reference internal" href="../examples/index.html#thecore-examples"><span class="std std-ref">Examples</span></a> section leverage the console. Use them as
a guidance when enabling console for your application.</p>
</div>
</div>
</div>
</div>



           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ti-tivac-tm4c123g.html" class="btn btn-neutral float-right" title="Texas Instruments Tiva C TM4C123G" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Supported platforms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Max Olender, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>